<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306770 (zh-CN, DDL); Windows/6.1.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="851"/>

<div>
<span><div><div><br/></div><div><span style="font-family: 宋体; font-size: 18px;">先来看这一段代码</span></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 433px;"></col></colgroup><tbody><tr><td style="background-color: rgb(242, 242, 242); border: 1px solid rgb(204, 204, 204); width: 433px; padding: 8px;"><div><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(8, 8, 8);">target.</span><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(219, 120, 0);">onclick</span> <span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(87, 121, 9);">=</span> <span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(54, 75, 192);">function</span><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(8, 8, 8);">(){</span></div><div><font style="font-size: 18px; font-family: 宋体;"><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(8, 8, 8);">  </span> <span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(8, 8, 8);">console.log(this);</span></font></div><div><span style="background-color: rgb(242, 242, 242); color: rgb(8, 8, 8); font-family: 宋体; font-size: 18px;">}</span></div></td></tr></tbody></table><div><span style="font-family: 宋体; font-size: 18px;">请问这里打印出什么？</span></div><div><font style="font-size: 18px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 18px; font-weight: bold;">很显然，会打印出</span><span style="font-family: 宋体; font-size: 18px; font-weight: bold;">target</span><span style="font-family: 宋体; font-size: 18px; font-weight: bold;">对象本身。</span></font></div><div><span style="font-family: 宋体; font-size: 18px;">我们都知道，</span><span style="font-family: 宋体; font-size: 18px; font-weight: bold;">this</span><span style="font-family: 宋体; font-size: 18px;"> 的含义 代表</span> <span style="font-family: 宋体; font-size: 18px; color: red;">当前对象</span><span style="font-family: 宋体; font-size: 18px;">，该如何来理解</span><span style="font-family: 宋体; font-size: 18px; color: red; font-weight: bold;">当前</span><span style="font-family: 宋体; font-size: 18px;">二字呢？</span></div><div><span style="font-family: 宋体; font-size: 18px;"> </span></div><div><span style="font-family: 宋体; font-size: 18px;">任何的话都需要语境，上下文环境，放在不同的地方，含义可能就大不相同。</span></div><div><span style="font-family: 宋体; font-size: 18px;">当有一个人对着你大喊一声：开！</span></div><div><span style="font-family: 宋体; font-size: 18px;">如果你手里有把枪，你会扣动扳机。如果你坐在汽车里，你会踩油门。如果你站在阳台，你可能会打开窗户。如果你在打麻将，对方可能胡牌了。。。。</span></div><div><font style="font-size: 18px; font-family: 宋体;"><span style="font-family: 宋体; font-size: 18px; font-weight: bold;">THIS</span><span style="font-family: 宋体; font-size: 18px; font-weight: bold;">身为一个关键字，它所指代的是此刻正在运行的函数依附于哪个对象。</span></font></div><div><span style="font-weight: bold; font-family: 宋体; font-size: 18px;"> </span></div><div><span style="font-weight: bold; font-family: 宋体; font-size: 18px;"> </span></div><div><span style="font-family: 宋体; font-size: 18px;">再来看这一段代码</span></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 439px;"></col></colgroup><tbody><tr><td style="background-color: rgb(242, 242, 242); border: 1px solid rgb(204, 204, 204); width: 439px; padding: 8px;"><div><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(8, 8, 8);">target.</span><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(219, 120, 0);">onclick</span> <span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(87, 121, 9);">=</span> <span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(54, 75, 192);">function</span><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(8, 8, 8);">(){</span></div><div><font style="font-size: 18px; font-family: 宋体;"><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(8, 8, 8);">  </span> <span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(8, 8, 8);">console.log(this);</span></font></div><div><span style="background-color: rgb(242, 242, 242); color: rgb(8, 8, 8); font-family: 宋体; font-size: 18px;">}</span></div><div><font style="font-size: 18px; font-family: 宋体;"><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(8, 8, 8);">obj.test = target.</span><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(219, 120, 0);">onclick</span><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(8, 8, 8);">;</span></font></div></td></tr></tbody></table><div><span style="font-family: 宋体; font-size: 18px;"> </span></div><div><span style="font-family: 宋体; font-size: 18px;">然后我们测试一下</span></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 435px;"></col></colgroup><tbody><tr><td style="background-color: rgb(242, 242, 242); border: 1px solid rgb(204, 204, 204); width: 435px; padding: 8px;"><div><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(38, 38, 38);">target.onclick();</span> <span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(0, 176, 80);">//</span> <span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(0, 176, 80);">结果是</span> <span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(0, 176, 80);">target</span><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(0, 176, 80);">对象本身</span></div><div><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(38, 38, 38);">obj.test();</span><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(38, 38, 38);"> </span> <span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(0, 176, 80);">//</span><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(0, 176, 80);">结果为</span><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(0, 176, 80);">obj</span> <span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px; color: rgb(0, 176, 80);">对象本身</span></div></td></tr></tbody></table><div><span style="font-family: 宋体; font-size: 18px;"> </span></div><div><span style="font-family: 宋体; font-size: 18px;">从代码当中我们分明可以看出， 二者调用的其实是同一个函数。</span></div><div><span style="font-family: 宋体; font-size: 18px;">可为什么结果不同呢？</span><span style="font-family: 宋体; font-size: 18px;"> </span> <span style="font-family: 宋体; font-size: 18px;">因为函数此刻所依附的对象不同了。</span></div><div><span style="font-family: 宋体; font-size: 18px;">就好像同一句话，出自不同人之口，代词指向的目标则会不一样。</span></div><div><span style="color: rgb(0, 112, 192); font-family: 宋体; font-size: 18px;"> </span></div><div><font face="宋体" style="font-size: 18px;"><span style="font-family: 宋体; font-size: 18px; color: rgb(0, 112, 192);">A</span><span style="font-family: 宋体; font-size: 18px; color: rgb(0, 112, 192);">对</span><span style="font-family: 宋体; font-size: 18px; color: rgb(0, 112, 192);">B</span><span style="font-family: 宋体; font-size: 18px; color: rgb(0, 112, 192);">说：“老子要杀了你！”</span><span style="font-family: 宋体; font-size: 18px; color: rgb(0, 112, 192);">  </span></font></div><div><font face="宋体" style="font-size: 18px;"><span style="font-family: 宋体; font-size: 18px; color: black;">这里的</span><span style="font-family: 宋体; font-size: 18px; color: black;"> </span><span style="font-family: 宋体; font-size: 18px; color: black; font-weight: bold;">老子</span><span style="font-family: 宋体; font-size: 18px; color: black;"> </span><span style="font-family: 宋体; font-size: 18px; color: black;">指代</span><span style="font-family: 宋体; font-size: 18px; color: black; font-weight: bold;">A</span><span style="font-family: 宋体; font-size: 18px; color: black;"> </span><span style="font-family: 宋体; font-size: 18px; color: black;">，</span><span style="font-family: 宋体; font-size: 18px; color: black;"> </span><span style="font-family: 宋体; font-size: 18px; color: black; font-weight: bold;">你</span><span style="font-family: 宋体; font-size: 18px; color: black;"> </span><span style="font-family: 宋体; font-size: 18px; color: black;">指代</span><span style="font-family: 宋体; font-size: 18px; color: black; font-weight: bold;">B</span></font></div><div><font face="宋体" style="font-size: 18px;"><span style="font-family: 宋体; font-size: 18px; color: rgb(0, 112, 192);">B</span><span style="font-family: 宋体; font-size: 18px; color: rgb(0, 112, 192);">对</span><span style="font-family: 宋体; font-size: 18px; color: rgb(0, 112, 192);">A</span><span style="font-family: 宋体; font-size: 18px; color: rgb(0, 112, 192);">说：</span><span style="font-family: 宋体; font-size: 18px; color: rgb(0, 112, 192);">”</span><span style="font-family: 宋体; font-size: 18px; color: rgb(0, 112, 192);">老子要弄死你！</span><span style="font-family: 宋体; font-size: 18px; color: rgb(0, 112, 192);">”</span></font></div><div><font face="宋体" style="font-size: 18px;"><span style="font-family: 宋体; font-size: 18px; color: black;">这里的</span><span style="font-family: 宋体; font-size: 18px; color: black;"> </span><span style="font-family: 宋体; font-size: 18px; color: black; font-weight: bold;">老子</span><span style="font-family: 宋体; font-size: 18px; color: black;"> </span><span style="font-family: 宋体; font-size: 18px; color: black;">指代</span><span style="font-family: 宋体; font-size: 18px; color: black; font-weight: bold;">B</span><span style="font-family: 宋体; font-size: 18px; color: black;"> </span><span style="font-family: 宋体; font-size: 18px; color: black;">，</span><span style="font-family: 宋体; font-size: 18px; color: black;"> </span><span style="font-family: 宋体; font-size: 18px; color: black; font-weight: bold;">你</span><span style="font-family: 宋体; font-size: 18px; color: black;"> </span><span style="font-family: 宋体; font-size: 18px; color: black;">指代</span><span style="font-family: 宋体; font-size: 18px; color: black; font-weight: bold;">A</span></font></div><div><span style="color: red; font-family: 宋体; font-size: 18px;">最后一个实验：</span></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 513px;"></col></colgroup><tbody><tr><td style="background-color: rgb(242, 242, 242); border: 1px solid rgb(204, 204, 204); width: 513px; padding: 8px;"><div><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px;">target.onclick = function(){</span></div><div><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px;">    setInterval(function(){</span></div><div><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px;">        console.log(this); //这里的this是什么？</span></div><div><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px;">    },50);</span></div><div><span style="background-color: rgb(242, 242, 242); font-family: 宋体; font-size: 18px;">}</span></div></td></tr></tbody></table><div><span style="font-family: 宋体; font-size: 18px;"> </span></div><div><span style="font-family: 宋体; font-size: 18px;">表面上看，this处于onclick函数当中。那么我们可能会直观的认为，</span></div><div><span style="font-family: 宋体; font-size: 18px;">this指的应该是target。但很显然这个答案错误。</span></div><div><span style="font-family: 宋体; font-size: 18px;"> </span></div><div><span style="font-family: 宋体; font-size: 18px;">this本质上是处于定时器的匿名函数当中，而这个匿名函数是在全局范围被调用的，相当于如下代码：</span></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 434px;"></col></colgroup><tbody><tr><td style="background-color: rgb(217, 217, 217); border: 1px solid rgb(204, 204, 204); width: 434px; padding: 8px;"><div><span style="background-color: rgb(217, 217, 217); font-family: 宋体; font-size: 18px;">window.匿名函数();</span></div></td></tr></tbody></table><div><span style="font-family: 宋体; font-size: 18px;">因此，这里的this指的是window对象。</span></div><div><span style="font-family: 宋体; font-size: 18px;"> </span></div><div><span style="font-family: 宋体; font-size: 18px;">注：在严格模式下，this是不允许指向window的，当出现指向window的情况，会报错。</span></div></div></span>
</div></body></html> 